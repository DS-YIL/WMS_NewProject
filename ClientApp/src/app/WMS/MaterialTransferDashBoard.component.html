<div class="card commoncardcss" style="margin:10px">
  <div class="card-header text-center commoncardheader">
    <div class="row" style="margin-top: 10px;margin-left: 0px !important;margin-right: 0px !important">
      <div class="col-lg-4 col-md-4 form-inline">
        <label class="labelheading">From Date :</label>&nbsp;&nbsp;
        <p-calendar class="mprldatepick"  [(ngModel)]="fromDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2050"></p-calendar>
      </div>
      <div class="col-lg-4 col-md-4 form-inline">
        <label class="labelheading">To Date :</label>&nbsp;&nbsp;
        <p-calendar class="mprldatepick" [(ngModel)]="toDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2050"></p-calendar>
      </div>
      <div class="col-lg-4 col-md-4 form-inline">
        <button type="button" class="btn btn-success" (click)="getMaterialRequestlist()" label="Save">Search</button>
      </div>
    </div>
  </div>
  <div class="card-body" style="overflow-y:visible;padding:0px;">
    <p-table #dt [value]="requestList" [style]="{'width':'100%'}" [scrollable]="true" scrollHeight="62vh">
      <ng-template pTemplate="header">
        <tr class="mprltbldata">
          <th style="text-align:center;width:70px">Sl.No.</th>
          <th style="text-align:center;width:100px">Transfer Id</th>
          <th style="text-align:center;width:200px">Project Code</th>
          <th style="text-align:center;width:150px">Transferred On</th>
          <th style="text-align:center;width:150px">Transferred By</th>
          <th style="text-align:center;width:150px">Remarks</th>

        </tr>
        <tr>

          <th></th>
          <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'transferid', 'contains')"></th>
          <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'projectcode', 'contains')"></th>
          <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'transferredon', 'contains')"></th>
          <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'transferedby', 'contains')"></th>
          <th></th>
          <th></th>

        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
        <tr>
          <td class="ptable-cell" style="text-align:right;width:70px;">{{ri+1}}</td>

          <td class="ptable-cell" style="text-align: center;width: 100px;">
            <span (click)="showattachdata(rowData)" class="btn btn-link">MATFR{{rowData.transferid}}</span>
          </td>
          <td class="ptable-cell" style="text-align:center;width:200px;">{{rowData.projectcode}}</td>
          <td class="ptable-cell" style="text-align:center;width:150px;">{{rowData.transferredon | date :  constants.dateFormat}}</td>
          <td class="ptable-cell" style="text-align:left;width:150px;">{{rowData.transferedby}}</td>
          <td class="ptable-cell" style="text-align:left;width:150px;">{{rowData.transferremarks}}</td>


        </tr>
        <tr *ngIf="rowData.showtr">
          <td [attr.colspan]="5" style="text-align:center;">
            <label class="labeltext">Material Detail</label>
          </td>

        </tr>
        <tr *ngIf="rowData.showtr">
          <td [attr.colspan]="5" style="text-align:center;">

            <p-table [value]="rowData.materialdata" [style]="{'width':'100%'}">
              <ng-template pTemplate="header">
        <tr class="mprltbldata">
          <th class="ptable-cell" style="width: 10%; text-align: center">Sl. No.</th>
          <th style="text-align:center;width:30%" class="ptable-cell">Material</th>
          <th style="text-align:center;width:50%" class="ptable-cell">Material Description</th>
          <th style="text-align:center;width:20%" class="ptable-cell">Transfer quantity</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex" let-rindex=0>
        <tr>
          <td class="ptable-cell" style="text-align:center"> {{ri+1}} </td>
          <td class="ptable-cell" style="text-align:center;">
            {{rowData.materialid}}
          </td>
          <td class="ptable-cell" style="text-align:left">
            {{rowData.materialdescription}}
          </td>
          <td class="ptable-cell" style="text-align:right">
            {{rowData.transferredqty}}
          </td>
      </ng-template>


    </p-table>
    </td>

    </tr>
    </ng-template>
    </p-table>


  </div>

</div>

